[
  {
    "type": "function",
    "function": {
      "name": "generate_test_cases",
      "description": "用于生成单个或多个测试用例，生成的测试用例包括用例标识、前置条件、测试步骤、预期结果和实际结果等，如用于生成单个、三个或更多测试用例",
      "parameters": {
        "type": "object",
        "properties": {
          "test_cases": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "case_id":       { "type": "string", "description": "用例唯一标识" },
                "title":         { "type": "string", "description": "测试用例标题或简要描述" },
                "preconditions": {
                  "type": "array",
                  "items": { "type": "string" },
                  "description": "执行测试前必须满足的前置条件列表"
                },
                "steps": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "step_number": { "type": "integer", "description": "步骤编号" },
                      "action":      { "type": "string",  "description": "执行操作描述" },
                      "data":        { "type": "string",  "description": "操作所需的输入数据（可选）" }
                    },
                    "required": ["step_number", "action"]
                  },
                  "description": "测试执行步骤的有序列表"
                },
                "expected_result": { "type": "string", "description": "期望的结果描述" },
                "actual_result":   { "type": "string", "description": "实际执行后的结果描述（可在执行后填写）" },
                "priority": {
                  "type": "string",
                  "enum": ["低","中","高"],
                  "description": "用例优先级"
                },
                "tags": {
                  "type": "array",
                  "items": { "type": "string" },
                  "description": "用例相关标签或类别"
                }
              },
              "required": ["case_id", "title", "preconditions", "steps", "expected_result"]
            },
            "description": "待生成的测试用例列表"
          }
        },
        "required": ["test_cases"]
      }
    }
  },

  {
    "type": "function",
    "function": {
      "name": "txt2sql",
      "description": "将用户的自然语言查询或需求转换为 SQL。注意：请尽量生成参数化 SQL（使用问号 '?' 占位符）并只使用模型被允许的表与列。返回格式应为 JSON 对象 {\"sql\":\"...\",\"params\":[...] } 或仅返回 SQL 字符串。不要执行任何数据库操作，仅负责生成 SQL。",
      "parameters": {
        "type": "object",
        "properties": {
          "query": { "type": "string", "description": "用户的自然语言查询或需求" },
          "hints": { "type": "string", "description": "可选的额外上下文或限制（如最大返回行数、排序要求等）" }
        },
        "required": ["query"]
      }
    }
  },

  {
    "type": "function",
    "function": {
      "name": "execute_sql",
      "description": "执行已经生成并经过服务端校验的 SQL（仅限 SELECT 查询）。参数包含 SQL 字符串与参数数组。执行前服务端会进行白名单校验并且只允许只读操作。返回值应为一个 JSON 用于表示执行结果。",
      "parameters": {
        "type": "object",
        "properties": {
          "sql": { "type": "string", "description": "要执行的 SQL，建议为参数化 SQL，使用 '?' 占位" },
          "params": {
            "type": "array",
            "items": { "type": ["string", "number", "boolean", "null"] },
            "description": "与 SQL 中占位符对应的参数数组"
          }
        },
        "required": ["sql"]
      }
    }
  }
]
